---
description:
auto_execution_mode: 1
---

# visual-validation.md

## ビジュアル検証ワークフロー

実装されたセクション/コンポーネントと Figma デザインを比較し、差分を詳細に分析します。

### 前提条件:

- Playwright MCP が設定済み
- Figma MCP が設定済み
- 開発サーバーが起動可能
- 検証対象のコンポーネント/セクションが実装済み

### ステップ:

1. **検証対象の選択**

   - 検証可能な対象をリスト表示
   - ユーザーに選択を促す

2. **Figma デザイン取得**

   - Figma MCP で該当セクションのデザインを取得
   - デザインスペック（サイズ、色、間隔）を抽出
   - Figma から画像エクスポート（PNG 形式、@2x 解像度）

3. **実装のキャプチャ準備**

   - 開発サーバー起動: npm run dev
   - ビューポート設定（1440px × 900px）
   - アニメーション無効化、フォント読み込み待機

4. **Playwright MCP でスクリーンショット取得**

   - ページ内の該当セクション/コンポーネントを特定
   - セレクタで要素を指定してキャプチャ
   - 複数の状態（通常、ホバー、アクティブ）を撮影
   - レスポンシブ各サイズで撮影

5. **画像比較と差分検出**

   - ピクセル比較で一致率を算出
   - 差分ヒートマップ生成
   - 完全一致、軽微な差異、要修正を分類

6. **要素ごとの詳細分析**

   - スペーシング検証（期待値 vs 実装値）
   - カラー検証（色値の比較）
   - タイポグラフィ検証（サイズ、行間）

7. **修正提案の生成**

   - 優先度高：必須修正項目
   - 優先度低：オプション項目
   - 具体的なコード修正案を提示

8. **レスポンシブ検証**

   - モバイル（375px）
   - タブレット（768px）
   - デスクトップ（1440px）

9. **自動修正の実行（オプション）**

   - ユーザー確認後、検出された問題を自動修正
   - 修正ファイルのリスト表示

10. **検証レポート生成**

    - 日時、対象、一致率のサマリー
    - 成果物（画像ファイル）のパス
    - 次のステップの提案

11. **GitHub Issue/PR への報告**
    - 検証結果を issue にコメント
    - スクリーンショットを添付
